CREATE OR REPLACE FUNCTION JOIN_STR(P_CURSOR SYS_REFCURSOR, P_DEL VARCHAR2 := ',')
RETURN VARCHAR2

 IS L_VALUE VARCHAR2(32767);
 L_RESULT VARCHAR2(32767);
 
 BEGIN
 
     LOOP
         FETCH P_CURSOR INTO L_VALUE;
         EXIT
         WHEN P_CURSOR%NOTFOUND;
             IF L_RESULT IS NOT NULL THEN
                 L_RESULT := L_RESULT || P_DEL;
             END IF;
             L_RESULT := L_RESULT || L_VALUE;
     END LOOP;
         
     CLOSE P_CURSOR;
         
     RETURN L_RESULT;
     
 END;